<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Export Options</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

</head>
<body>
<div>
    <button id="backButton" onclick="goBack()" style="position: fixed; top: 10px; left: 10px;">Back</button>
    <button id="homeButton" onclick="goBack()" style="position: fixed; top: 10px; left: 60px;background-color:#28a745;color:#ffff">Home</button>
</div>

<div class="container">
    <h1 class="text-center my-4">Export Options</h1>
    <div class="form-group">
        <label for="targetUrl">Target Application URL:</label>
        <input class="form-control" id="targetUrl" placeholder="Enter target application URL" type="text">
    </div>
    <div class="text-center">
        <button class="btn btn-primary" onclick="exportAsJSON()">Export as JSON</button>
        <button class="btn btn-secondary" onclick="exportToLink()">Export to Link</button>
    </div>
</div>
</div>

<script>
    function exportAsJSON() {
        const targetUrl = document.getElementById('targetUrl').value;
        if (targetUrl) {
            // Implement the logic to export as JSON
            alert('Exporting as JSON to ' + targetUrl);
        } else {
            alert('Please enter the target application URL');
        }
    }

    function exportToLink() {
        const targetUrl = document.getElementById('targetUrl').value;
        if (targetUrl) {
            // Implement the logic to export to link
            exportToLinkFromServer();
        } else {
            alert('Please enter the target application URL');
        }
    }

    function goBack() {
        window.history.back();
    }

    function exportToLinkFromServer(){
    const targetUrl = document.getElementById('targetUrl').value;
    if (targetUrl) {
        $.ajax({
            url: '/v1/inventory/exportInventoryAsLink',
            method: 'GET',
            data: { targetUrl: targetUrl },
            success: function(response) {
                alert('Exported Successfully');
            },
            error: function(e) {
                alert("Couldn't connect to Server");
            }
        });
    } else {
        alert('Please enter the target application URL');
    }

    }
    function goBack() {
        window.history.back();
    }
</script>
</body>
</html>