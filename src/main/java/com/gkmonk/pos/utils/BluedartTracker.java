package com.gkmonk.pos.utils;

   import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import org.json.JSONObject;

public class BluedartTracker {

        public static final String AIRWAYBILLS = "77572609015,77572615536,77572618885,77572622960,77572624640,77572625830,77572627440,77572629470,77572748816,77572750566,77572849841,77574086730,77574088911,4905216394264,77574095686,77574098943,77574100310,77574104963,77574121881,77574123115,77574215095,77574216123,77574217836,77574219262,77574221771,77574228793,77574362132,77574363694,77574365326,77574365901,77575271760,77575387492,77575274980,77575276590,77575279143,77575425314,4905216398836,77575540641,77575543183,77575544631,77575546296,77575547862,77575548713,77577608301,77576960333,77576785705,4905216409406,77577599525,77576796216,77576798283,77576799882,4905216409443,77576802962,77576998472,77577000826,77577003582,77577005030,77577596191,77577509785,77578340114,77578344130,77578346521,77578478025,4905216427201,77578350080,77578352073,77578353344,77578504216,77578510251,77578512631,77578515221,77578565175,4905216428343,77578717635,77578987872,77578990952,77578991980,77578992772,77578993752,77580826960,77580830154,77580836336,77580838646,4905216444185,77580845661,77580847956,77580849522,77581039163,77581201390,77581044822,4905216444491,4905216444502,77581051763,77581054456,77581056232,77581268656,77581270874,77581280700,77581768224,77581773754,77581775224,77581777302,77581778455,77581780290,77581783952,77581788336,4905216446893,77582780656,77582784311,77582787671,77582791226,77582808796,77582826554,77583019533,77583023173,77583028843,77583031153,77583033555,77583038256,77583040765,77583169952,77584833491,4905216480961,77584839511,77584842451,77584844654,4905216480983,77584850114,77585134616,77585136786,77585140264,77585205456,77585274491,77585278120,77585280054,77585281605,77585283510,77585284932,77585287242,77585353930,77586139190,4905216495355,77586148102,77586149756,4905216495370,77586230934,77586232986,77586286606,77586293820,77586378822,77586298823,4905216495742,77586303130,77586399343,77586412061,77586417834,77586470393,77586472283,77586473193,77586474405,77586475385,77586476376,77586477916,77586481781,77586557882,77586560881,77586562152,77586680220,77587532433,77587535734,4905216503232,77587566350,77587569065,77587570513,4905216503346,77587746725,77587815476,77587820660,77587823843,77587826330,77587828393,77587829911,77587831160,4905216504396,77588017286,4905216504411,77588021814,77588023866,77588025410,77588247763,77588251624,77588285051,77588287501,4905216504853,77588290032,77588291944,77588292972,77588296660,77588332054,4905216505074,77588364486,77588367570,77588368115,77588369025,77588476221,77589095010,77589098506,77589110421,77589112134,4905216519284,77589121363,77589128175,77589133005,77589256135,77589265596,77589268853,77589269811,77589272515,77589273871,77589275271,77589276940,4905216519741,77589279876,77589366551,4905216519903,77589372501,77589379722,77589381936,77589383970,77589385543,77589387304,77589392020,77589393232,77589522780,77589538305,77589894546,77589896996,77589903823,77589907054,77589967965,77591842274,77591845881,77591864081,4905216554844,4905216554866,77591860054,77592055741,77592062391,77592098463,77592106502,77592108440,77592111181,77592113815,77592116604,77592119426,77592306772,77592310095,4905216586532,77592315430,4905216586576,77592331530,77592333442,77592434555,77592561012,77592566424,77592569611,77592571313,77592572680,4905216586941,77592696182,77592698315,77592699774,77592700883,77592702795,77592705223,77592707006,77592763765,77592795383,4905216587501,77592810444,77592812883,77593975863,77593979816,4905216589671,77593988824,4905216589693,77593991893,77594303916,77594330704,77594331684,77594332642,77594334005,4905216590290,77594337844,77594339642,4905216591841,77595218411,77595222250,77595228406,77595232175,77595235546,77595239131,77595240962,77595242373,77595244274,77595245770,77595550336,77595552775,77595555074,77595555936,77595558165,77595751671,77595752942,77595754305,77595755591,77595758446,4905216593532,77595875243,77595880261,77595890046,4905216593753,4905216593764,77595897002,4905216593775,77595898553,77595936143,77595943703,77595956071,77595957353,77595959980,77595967352,77595971445,77595977933,77595984944,77595985876,77595987206,77596064291,77596080693,77596863621,77596867471,77596873712,77596964745,77596995630,4905216595960,77597016840,4905216595971,77597022145,4905216595993,77597025704,77597026780,77597028482,77597088516,77597103172,77597115761,4905216596310,77597130660,77597133390,77597340203,77597349244,77597477031,77597479363,77597481463,77597483235,77597486153,77597566546,77597595773,77598757751,77598760293,77598779856,77598798421,77598804614,77598901166,77598934066,77598935746,77598937706,77598949680,77598951231,77599120185,77599129403,77599146542,77599147905,77599149821,77599150871,77599152120,77599157613,77599159853,77599220204,77599227160,77599227860,77599228965,77599230833,77599232933,77599233773,77599235092,77599946826,77599950503,77599954320,77599955834,77599957282,77599958925,76500244962,76500314284,76500336076,76500336986,76500338994,76500340033,76500404735,76500412354,76502916696,76503310133,76502920594,76502922624,76502926776,76502928073,76502929823,76502931050,76502937991,76502947743,76502950484,76502979906,76502983104,76502984880,76503000372,76503089541,76503092772,76503094883,76503103423,76503105044,76503106702,76503108135,76503109782,76503115415,76503118344,76503120234,76503121623,76503123620,76503127584,76503129286,76503131051,76503132580,76503134713,76503136216,76503137373,76503138983,76503140825,76503141761,76504488863,76504697544,76504702735,76504703774,76504705152,76504710892,76504712771,76504713913,76504715976,76504716960,76504955995,76504962284,76504964561,76506490616,76506615872,76506497911,76506499882,76506502306,76506503581,76506507070,76506510150,76506512191,76506514416,76506516822,76506518163,76506520263,76506521490,76506523446,76506525922,76506637922,76506643021,76507768584,76507770592,76507772235,76507774405,76507776402,76507782072,76509491402,76509493244,76509496803,76509500115,76509501670,76509503184,76509519273,76509520883,76509521826,76509522714,76510817681,76510820234,76510821660,76510822975,76510824294,76510825742,76510827400,76510828660,76510829721,76510830922,76510832193,76510835111,76510836345,76511139224,76511321062,76511323501,76511324842,76511327325,76513816492,76513821182,76513824936,76513827180,76513828742,76513831284,76513834994,76513836523,76513838903,76513840421,76513841972,76513843136,76513845203,76513846415,76513852365,76513854675,76513855961,76513860485,76513865142,76514138492,77572916724,77572920670,77574308836,77577605906,77578488186,77578556753,77578754820,77578770846,21428410309116,18567310081406,77581247332,77581432902,77581668301,77581716343,77581771923,77583026964,77583145835,77583160163,77585255215,77585343172,21428410312255,77586550414,77586834592,77587716054,77587930195,77587985042,77588003323,77588360441,77589258622,77589560613,77591981036,77591991142,77592325160,77594113656,77594127800,77594514395,77595684655,77595704502,77596089060,77596090633,77596095323,77596101074,77597007180";
        public static final String[] ARR = AIRWAYBILLS.split(",");
        public static void main(String[] args) {

            String[] awbs = AIRWAYBILLS.split(",");
            for (String awb : awbs) {
                awb = awb.trim();
                if (awb.isEmpty()) continue;

                try {
                    String urlStr = "https://api.bluedart.com/servlet/RoutingServlet"
                            + "?handler=tnt&action=custawbquery"
                            + "&loginid=DRD10211"
                            + "&awb=awb"
                            + "&numbers=" + awb
                            + "&format=json"
                            + "&lickey=k2ihph1pjoipquukkfrqjtughjjifrun"
                            + "&verno=1.3&scan=1";

                    URL url = new URL(urlStr);
                    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                    conn.setRequestMethod("GET");

                    if (conn.getResponseCode() == 200) {
                        BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
                        StringBuilder response = new StringBuilder();
                        String line;
                        while ((line = in.readLine()) != null) {
                            response.append(line);
                        }
                        in.close();

                        // Parse JSON response
                        JSONObject json = new JSONObject(response.toString());

                        if (json.has("ShipmentData")) {
                            JSONObject shipment = json.getJSONObject("ShipmentData").getJSONArray("Shipment").getJSONObject(0);
                            System.out.println("AWB " + awb + " is VALID ✅"+"Status: " + shipment.optString("Status", "Unknown") + " Origin: "+ shipment.optString("Origin", "Unknown") );
                        } else {
                            System.out.println("AWB " + awb + " is INVALID ❌");
                        }
                    } else {
                        System.out.println("AWB " + awb + " -> HTTP Error: " + conn.getResponseCode());
                    }

                } catch (Exception e) {
                    System.out.println("AWB " + awb + " -> ERROR: " + e.getMessage());
                }
            }
        }
    }

